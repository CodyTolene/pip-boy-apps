function CustomRadio(){function k(){if(x===!1)return;i(a),i(c),i(b),i(A),i(B)}function i(a){g.setColor(F).drawRect(a.x1,a.y1,a.x2,a.y2)}function G(){for(let a=0;a<40;a++){const c=a%5===0?3:1;const b=a%5===0?2:1;bC.setColor(c),bC.drawLine(245+a*3,143-b,245+a*3,143),bC.drawLine(367-b,22+a*3,367,22+a*3)}bC.setColor(3).drawLine(245,144,367,144).drawLine(368,144,368,22),bC.flip()}function H(b){let a=Date.now();if(a-p<C)return;if(p=a,b===0){const b=e*f;const a=h[b+d];if(!a)return;j==='/'+r+a?w():L(a)}else u(b*-1)}function I(a){u(a)}function J(){v(),bC.clear(1).flip(),E.reboot()}function K(){try{h=fs.readdir('/RADIO').filter(a=>a.endsWith('.wav')).sort(),print('Loaded '+h.length+' songs:')}catch(a){print('Failed to load songs:',a),h=[]}e=0,d=0,t()}function t(){const a=e*f;const b=h.slice(a,a+f);g.setColor('#000').fillRect(c.x1,c.y1,c.x2,c.y2),g.setFontMonofonto16().setFontAlign(-1,-1,0);const i=10;const j=10;const l=20;b.forEach((h,b)=>{const e=c.y1+b*l+i;const a=h.replace(/\.wav$/i,'');const f=a.length>19?a.slice(0,16)+'...':a;g.setColor(b===d?s:D).drawString(f,c.x1+j,e,!0)}),k()}function u(g){const a=e*f;const b=h.slice(a,a+f);const c=Math.floor((h.length-1)/f);d+=g,d<0?e>0?(e--,d=f-1):d=0:d>=b.length&&(e<c?(e++,d=0):d=b.length-1),t()}function L(c){Pip.audioStop(),j='/'+r+c,Pip.audioStart(j),Pip.radioClipPlaying=!0,g.setColor('#000').fillRect(b.x1,b.y1,b.x2,b.y2),g.setColor(s).setFontMonofonto16().setFontAlign(-1,-1,0);const a=c.replace(/\.wav$/i,'');const d=a.length>19?a.slice(0,16)+'...':a;g.drawString(d,b.x1,b.y1,!0),k()}function v(){Pip.removeAllListeners(m),Pip.removeAllListeners(n),Pip.removeAllListeners(o),Pip.removeAllListeners(q)}function M(){Pip.on(m,H),Pip.on(n,I),Pip.on(o,J),Pip.on(q,w)}function w(){Pip.audioStop(),j=null,Pip.radioClipPlaying=!1,g.setColor('#000').fillRect(b.x1,b.y1,b.x2,b.y2),k()}const l={};const N='Custom Radio';const O='3.0.0';const x=!0;const y=g.getWidth();const z=g.getHeight();const a={x1:60,y1:50,x2:y-60,y2:z-10};const c={x1:a.x1+10,y1:a.y1+20,x2:(a.x2+a.x1)/2,y2:a.y2-20};const b={x1:c.x2+10,y1:a.y2-40,x2:a.x2-10,y2:a.y2-20};const A={x1:c.x2+10,y1:a.y1+20,x2:a.x2-10,y2:a.y2-20};const B={x1:c.x2+45,y1:a.y1+37,x2:a.x2-12,y2:a.y2-101};const m='knob1';const n='knob2';const o='torch';const C=100;let p=0;const q='audioStopped';const r='RADIO/';let j=null;let e=0;const f=10;let h=[];let d=0;const s='#00ff00';const D='#007f00';const F='#003300';return l.run=function(){bC.clear(1).flip(),Pip.mode=MODE.RADIO,drawHeader(Pip.mode),v(),M(),K(),k(),G()},l}CustomRadio().run()