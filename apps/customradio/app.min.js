function CustomRadio(){function i(a){g.setColor('#00ff00').drawRect(a.x1,a.y1,a.x2,a.y2)}function y(c){let a=Date.now();if(a-o<x)return;if(o=a,c===0){const c=e*f;const a=h[c+b];if(!a)return;j==='/'+q+a?u():C(a)}else s(c*-1)}function z(a){s(a)}function A(){t(),bC.clear(1).flip(),E.reboot()}function B(){try{h=fs.readdir('/RADIO').filter(a=>a.endsWith('.wav')).sort(),print('Loaded '+h.length+' songs:')}catch(a){print('Failed to load songs:',a),h=[]}e=0,b=0,r()}function r(){const a=e*f;const j=h.slice(a,a+f);g.setColor('#000').fillRect(d.x1,d.y1,d.x2,d.y2),g.setFontMonofonto16().setFontAlign(-1,-1,0);const k=10;const l=10;const m=20;j.forEach((h,c)=>{const e=d.y1+c*m+k;const a=h.replace(/\.wav$/i,'');const f=a.length>19?a.slice(0,16)+'...':a;g.setColor(c===b?'#00ff00':'#007f00').drawString(f,d.x1+l,e,!0)}),i(c),i(d)}function s(g){const a=e*f;const c=h.slice(a,a+f);const d=Math.floor((h.length-1)/f);b+=g,b<0?e>0?(e--,b=f-1):b=0:b>=c.length&&(e<d?(e++,b=0):b=c.length-1),r()}function C(c){Pip.audioStop(),j='/'+q+c,Pip.audioStart(j),Pip.radioClipPlaying=!0,g.setColor('#000').fillRect(a.x1,a.y1,a.x2,a.y2),g.setColor('#00ff00').setFontMonofonto16().setFontAlign(-1,-1,0);const b=c.replace(/\.wav$/i,'');const d=b.length>19?b.slice(0,16)+'...':b;g.drawString(d,a.x1,a.y1,!0),i(a)}function t(){Pip.removeAllListeners(l),Pip.removeAllListeners(m),Pip.removeAllListeners(n),Pip.removeAllListeners(p)}function D(){Pip.on(l,y),Pip.on(m,z),Pip.on(n,A),Pip.on(p,u)}function u(){Pip.audioStop(),j=null,Pip.radioClipPlaying=!1,g.setColor('#000').fillRect(a.x1,a.y1,a.x2,a.y2),i(a)}const k={};const F='Custom Radio';const G='3.0.0';const v=g.getWidth();const w=g.getHeight();const c={x1:60,y1:50,x2:v-60,y2:w-10};const d={x1:c.x1+10,y1:c.y1+20,x2:(c.x2+c.x1)/2,y2:c.y2-20};const a={x1:d.x2+10,y1:c.y2-40,x2:c.x2-10,y2:c.y2-20};const l='knob1';const m='knob2';const n='torch';const x=100;let o=0;const p='audioStopped';const q='RADIO/';let j=null;let e=0;const f=10;let h=[];let b=0;return k.run=function(){bC.clear(1).flip(),Pip.mode=MODE.RADIO,drawHeader(Pip.mode),t(),D(),B(),i(a)},k}CustomRadio().run()