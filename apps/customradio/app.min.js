function CustomRadio(){function m(){if(B===!1)return;j(a),j(c),j(b),j(F),j(i),w()}function j(a){g.setColor(H).drawRect(a.x1,a.y1,a.x2,a.y2)}function w(){const d=5;const h=3;const e=i.x1;const c=i.y1;const b=i.x2;const j=i.y2;const a=j-1;const f=b;for(let i=0;i<40;i++){const k=i%d===0?l:v;const b=i%d===0?2:1;const j=e+i*h;const m=a-b;g.setColor(k),g.drawLine(j,m,j,a),g.drawLine(f-b,c+i*3,f,c+i*3)}g.setColor(l),g.drawLine(e,a,b,a),g.drawLine(b,a,b,c)}function I(b){let a=Date.now();if(a-s<G)return;if(s=a,b===0){const b=e*f;const a=h[b+d];if(!a)return;k==='/'+u+a?A():M(a)}else y(b*-1)}function J(a){y(a)}function K(){z(),bC.clear(1).flip(),E.reboot()}function L(){try{h=fs.readdir('/RADIO').filter(a=>a.endsWith('.wav')).sort(),print('Loaded '+h.length+' songs:')}catch(a){print('Failed to load songs:',a),h=[]}e=0,d=0,x()}function x(){const a=e*f;const b=h.slice(a,a+f);g.setColor(n).fillRect(c.x1,c.y1,c.x2,c.y2),g.setFontMonofonto16().setFontAlign(-1,-1,0);const i=10;const j=10;const k=20;b.forEach((h,b)=>{const e=c.y1+b*k+i;const a=h.replace(/\.wav$/i,'');const f=a.length>19?a.slice(0,16)+'...':a;g.setColor(b===d?l:v).drawString(f,c.x1+j,e,!0)}),m()}function y(g){const a=e*f;const b=h.slice(a,a+f);const c=Math.floor((h.length-1)/f);d+=g,d<0?e>0?(e--,d=f-1):d=0:d>=b.length&&(e<c?(e++,d=0):d=b.length-1),x()}function M(c){Pip.audioStop(),k='/'+u+c,Pip.audioStart(k),Pip.radioClipPlaying=!0,g.setColor(n).fillRect(b.x1,b.y1,b.x2,b.y2),g.setColor(l).setFontMonofonto16().setFontAlign(-1,-1,0);const a=c.replace(/\.wav$/i,'');const d=a.length>19?a.slice(0,16)+'...':a;g.drawString(d,b.x1,b.y1,!0),m()}function z(){Pip.removeAllListeners(p),Pip.removeAllListeners(q),Pip.removeAllListeners(r),Pip.removeAllListeners(t)}function N(){Pip.on(p,I),Pip.on(q,J),Pip.on(r,K),Pip.on(t,A)}function A(){Pip.audioStop(),k=null,Pip.radioClipPlaying=!1,g.setColor(n).fillRect(b.x1,b.y1,b.x2,b.y2),m()}const o={};const O='Custom Radio';const P='3.0.0';const B=!0;const C=g.getWidth();const D=g.getHeight();const a={x1:60,y1:50,x2:C-60,y2:D-10};const c={x1:a.x1+10,y1:a.y1+20,x2:(a.x2+a.x1)/2,y2:a.y2-20};const b={x1:c.x2+10,y1:a.y2-40,x2:a.x2-10,y2:a.y2-20};const F={x1:c.x2+10,y1:a.y1+20,x2:a.x2-10,y2:a.y2-20};const i={x1:c.x2+45,y1:a.y1+37,x2:a.x2-12,y2:a.y2-101};const p='knob1';const q='knob2';const r='torch';const G=100;let s=0;const t='audioStopped';const u='RADIO/';let k=null;let e=0;const f=10;let h=[];let d=0;const n='#000000';const l='#00ff00';const v='#007f00';const H='#003300';return o.run=function(){bC.clear(1).flip(),Pip.mode=MODE.RADIO,drawHeader(Pip.mode),z(),N(),L(),m(),w()},o}CustomRadio().run()