function CustomRadio(){function j(){if(w===!1)return;k(c),k(d),k(a)}function k(a){g.setColor('#00ff00').drawRect(a.x1,a.y1,a.x2,a.y2)}function A(c){let a=Date.now();if(a-p<z)return;if(p=a,c===0){const c=e*f;const a=h[c+b];if(!a)return;i==='/'+r+a?v():F(a)}else t(c*-1)}function B(a){t(a)}function C(){u(),bC.clear(1).flip(),E.reboot()}function D(){try{h=fs.readdir('/RADIO').filter(a=>a.endsWith('.wav')).sort(),print('Loaded '+h.length+' songs:')}catch(a){print('Failed to load songs:',a),h=[]}e=0,b=0,s()}function s(){const a=e*f;const c=h.slice(a,a+f);g.setColor('#000').fillRect(d.x1,d.y1,d.x2,d.y2),g.setFontMonofonto16().setFontAlign(-1,-1,0);const i=10;const k=10;const l=20;c.forEach((h,c)=>{const e=d.y1+c*l+i;const a=h.replace(/\.wav$/i,'');const f=a.length>19?a.slice(0,16)+'...':a;g.setColor(c===b?'#00ff00':'#007f00').drawString(f,d.x1+k,e,!0)}),j()}function t(g){const a=e*f;const c=h.slice(a,a+f);const d=Math.floor((h.length-1)/f);b+=g,b<0?e>0?(e--,b=f-1):b=0:b>=c.length&&(e<d?(e++,b=0):b=c.length-1),s()}function F(c){Pip.audioStop(),i='/'+r+c,Pip.audioStart(i),Pip.radioClipPlaying=!0,g.setColor('#000').fillRect(a.x1,a.y1,a.x2,a.y2),g.setColor('#00ff00').setFontMonofonto16().setFontAlign(-1,-1,0);const b=c.replace(/\.wav$/i,'');const d=b.length>19?b.slice(0,16)+'...':b;g.drawString(d,a.x1,a.y1,!0),j()}function u(){Pip.removeAllListeners(m),Pip.removeAllListeners(n),Pip.removeAllListeners(o),Pip.removeAllListeners(q)}function G(){Pip.on(m,A),Pip.on(n,B),Pip.on(o,C),Pip.on(q,v)}function v(){Pip.audioStop(),i=null,Pip.radioClipPlaying=!1,g.setColor('#000').fillRect(a.x1,a.y1,a.x2,a.y2),j()}const l={};const H='Custom Radio';const I='3.0.0';const w=!0;const x=g.getWidth();const y=g.getHeight();const c={x1:60,y1:50,x2:x-60,y2:y-10};const d={x1:c.x1+10,y1:c.y1+20,x2:(c.x2+c.x1)/2,y2:c.y2-20};const a={x1:d.x2+10,y1:c.y2-40,x2:c.x2-10,y2:c.y2-20};const m='knob1';const n='knob2';const o='torch';const z=100;let p=0;const q='audioStopped';const r='RADIO/';let i=null;let e=0;const f=10;let h=[];let b=0;return l.run=function(){bC.clear(1).flip(),Pip.mode=MODE.RADIO,drawHeader(Pip.mode),u(),G(),D(),j()},l}CustomRadio().run()