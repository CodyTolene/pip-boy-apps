function PortaHack(){function P(){a.setColor(t).fillRect(0,0,x,y)}function a1(){if(l<0||l>J)throw new Error('Invalid number of attempts remaining: '+l);a.setColor(t).fillRect(r);const b=N.padding;const g=N.textHeight;const c=r.y1+g+b;let e=l+' ATTEMPT(S) LEFT:';a.setColor(k).setFont(K).setFontAlign(-1,-1).drawString(e,r.x1+b,c);const d=8;const f=5;const h=r.x1+b+a.stringWidth(e)+f;for(let i=0;i<l;i++){const b=h+i*(d+f);a.setColor(k).fillRect(b,c,b+d,c+d)}}function w(b){if(!S)return;a.setColor(a9).drawRect(b)}function i(){const l=7;const e=b<h;const f=e?B:C;const j=e?0:h;const g=e?m[b]:n[b-j];const q=g.line;const c=f.y1+(b-j)*10;const s=f.x1+2+(l+d)*6;if(i.prevRow!==void 0&&i.prevCol!==void 0){const c=i.prevRow<h;const b=c?B:C;const e=c?0:h;const f=c?m[i.prevRow]:n[i.prevRow-e];const d=b.y1+(i.prevRow-e)*10;const g='0xF'+(2404+i.prevRow).toString(16).padStart(3,'0');a.setColor(t).fillRect(b.x1,d,b.x2,d+10),a.setColor(k).setFont('6x8').setFontAlign(-1,-1),a.drawString(g+' '+f.line,b.x1+2,d)}i.prevRow=b,i.prevCol=d;const r='0xF'+(2404+b).toString(16).padStart(3,'0');if(a.setFont('6x8').setFontAlign(-1,-1),a.setColor(k).drawString(r+' '+q,f.x1+2,c),d>=g.embedAt&&d<g.embedAt+(e?o[b].length:p[b-j].length)){const h=e?o[b]:p[b-j];const d=f.x1+2+(l+g.embedAt)*6;a.setColor(k).fillRect(d,c,d+h.length*6,c+10),a.setColor(t).drawString(q.substr(g.embedAt,h.length),d,c)}else{const b=f.x1+2+(l+d)*6;a.setColor(k).fillRect(b,c,b+6,c+10),a.setColor(t).drawString(q[d],b,c)}}function aa(){F=!0,D=Date.now()+1e3,P(),G();const c='GAME OVER';a.setColor(k).setFontMonofonto18().setFontAlign(-1,-1).drawString(c,(x-a.stringWidth(c))/2,y/3);const d='Press play to restart';a.setColor(T).setFontMonofonto16().setFontAlign(-1,-1).drawString(d,(x-a.stringWidth(d))/2,y/3+30),f&&(clearInterval(f),f=null);let b=!1;f=setInterval(()=>{Date.now()>=D&&BTN_PLAY.read()?b||(b=!0,clearInterval(f),f=null,a5()):b=!1},I)}function ab(){a.setColor(t).fillRect(z);const b='ROBCO INDUSTRIES (TM) '+a7+' v'+a8+' PROTOCOL';a.setColor(k).setFont(K).setFontAlign(-1,-1).drawString(b.toUpperCase(),z.x1+L.padding,z.y1+L.padding)}function Q(){const d=10;const e=Math.floor((s.y2-s.y1)/d);const b=c.slice(-e);a.setColor(t).fillRect(s),a.setFont('6x8').setFontAlign(-1,-1);for(let c=0;c<b.length;c++){const e=s.y2-d*(b.length-c);const f=b[c];a.setColor(k).drawString(f,s.x1+2,e)}}function a2(d,b,e,f){const c=10;a.setFont('6x8').setFontAlign(-1,-1);for(let g=0;g<d.length;g++){const h='0xF'+(e+g).toString(16).padStart(3,'0');const d=f[g];if(!d||(typeof d.line)[1]!='t'){const a=`Invalid junk line at ${g}: ${JSON.stringify(d)}`;throw new Error(a)}const i=d.line;const j=b.y1+g*c;a.setColor(k).drawString(h+' '+i,b.x1+2,j)}}function a3(){a.setColor(t).fillRect(A);let b='';l<=0?b='!!! ACCESS DENIED !!! Select again to restart.':l===1?b='!!! WARNING: LOCKOUT IMMINENT !!!':b='ENTER PASSWORD NOW',a.setColor(k).setFont(K).setFontAlign(-1,-1).drawString(b,A.x1+M.padding,A.y1+M.padding)}function ac(){F=!0,D=Date.now()+1e3,P(),G();const c='ACCESS GRANTED';a.setColor(k).setFontMonofonto18().setFontAlign(-1,-1).drawString(c,(x-a.stringWidth(c))/2,y/3);const d='Press play to restart';a.setColor(T).setFontMonofonto16().setFontAlign(-1,-1).drawString(d,(x-a.stringWidth(d))/2,y/3+30),f&&(clearInterval(f),f=null);let b=!1;f=setInterval(()=>{Date.now()>=D&&BTN_PLAY.read()?b||(b=!0,clearInterval(f),f=null,a5()):b=!1},I)}function a4(e,b){const c='{}[]<>?/\\|!@#$%^&*()-_=+;:"\',.`~ABCDEFGHIJKLMNOPQRSTUVWXYZ';let a='';const d=Math.random()*(e-b.length)|0;for(let f=0;f<e;f++)f===d?(a+=b,f+=b.length-1):a+=c[Math.random()*c.length|0];return{line:a,embedAt:d}}function ad(c){let a=Date.now();if(a-_<Z)return;if(_=a,c===0)R();else{b=(b+(c<0?1:-1)+O)%O;const a=b<h;const f=a?0:h;const e=a?m[b]:n[b-f];const g=a?o[b]:p[b-f];d>=e.embedAt&&d<e.embedAt+g.length&&(d=e.embedAt),i()}}function ae(){const a=BTN_PLAY.read();const b=Date.now();a&&!a0&&b-$>=Z&&($=b,F||R()),a0=a}function af(){G(),q&&clearInterval(q),bC.clear(1).flip(),E.reboot()}function ag(a){if(a===0)R();else{const f=b<h;const g=f?0:h;const c=f?m[b]:n[b-g];const j=f?o[b]:p[b-g];const k=c.line.length;const l=d>=c.embedAt&&d<c.embedAt+j.length;let e=1;l&&(a>0?e=Math.max(1,c.embedAt+j.length-d):e=Math.max(1,d-c.embedAt)),d=(d+(a>0?e:-e)+k)%k,i()}}function ah(){const a=[1,5,10,15,20];const b=a.findIndex(a=>a===Pip.brightness);const c=(b+1)%a.length;Pip.brightness=a[c],Pip.updateBrightness()}function G(){Pip.removeAllListeners(W),Pip.removeAllListeners(X),Pip.removeAllListeners(Y)}function a5(){f&&(clearInterval(f),f=null),q&&(clearInterval(q),q=null),F=!1,d=0,b=0,l=J,j=null,c=[],m=[],n=[],u=null,i.prevRow=undefined,i.prevCol=undefined,H.run()}function R(){const e=b<h;const f=e?0:h;const a=e?m[b]:n[b-f];const g=e?o[b]:p[b-f];const k=d>=a.embedAt&&d<a.embedAt+g.length;const q=10;const i=Math.floor((s.y2-s.y1)/q);if(c.length===1&&c[0]==='> . '&&c.pop(),l<=0){aa();return}if(k){j=a.line.substr(a.embedAt,g.length);const b=c.findIndex(a=>a==='> '+j);if(b!==-1){const a=c[b+1];c.push('> '+j),a&&a.startsWith('>')&&c.push(a)}else if(j===u){c.push('> '+j),c.push('> ACCESS GRANTED'),Q(),ac();return}else{let a=0;if(j.length===u.length)for(let b=0;b<j.length;b++)j[b]===u[b]&&a++;while(c.length>=i-1)c.shift();c.push('> '+j),c.push('> '+a+'/'+u.length+' correct.'),l--,a1(),a3(),l===0&&c.push('> Entry denied')}}else j=a.line[d],c.length>=i&&c.shift(),c.push('> ['+j+']');Q()}function ai(){Pip.on(W,ad),Pip.on(X,ag),Pip.on(Y,ah)}function aj(){const a=o.length;const b=p.length;if(a===0||b===0)throw new Error('Password lists cannot be empty');if(m=o.map(a=>a4(12,a)),n=p.map(a=>a4(12,a)),m.length!==a||n.length!==b)throw new Error('Mismatch between password lists and junk lines');const c=o.concat(p);u=c[Math.random()*c.length|0],console.log('Password: ',u)}function a6(){Pip.removeAllListeners(U),ab(),a3(),a1(),aj(),a2(o,B,2404,m),a2(p,C,2608,n),w(e),w(z),w(A),w(r),w(B),w(C),w(s),c.push('> . '),Q(),ai(),f&&clearInterval(f),q&&clearInterval(q),q=setInterval(ae,I)}const H={};const a7='Porta Hack';const a8='1.0.0';const S=!1;const I=16.666666666666668;const J=4;let l=J;let u=null;let d=0;let b=0;let D=0;let F=!1;let m=[];let n=[];let j=null;let q=null;let f=null;const v=8;const K='6x'+v;const a=g;const x=g.getWidth();const y=g.getHeight();const e={x1:60,x2:x-60,y1:10,y2:y-10};const L={height:v+4,padding:2,textHeight:v};const z={x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y1+L.height};const M={height:v+4,padding:2,textHeight:v};const A={x1:e.x1,x2:e.x2,y1:z.y2,y2:z.y2+M.height};const N={height:v*3+2+2,padding:2,textHeight:v};const r={x1:e.x1,x2:e.x2,y1:A.y2,y2:A.y2+N.height};const B={x1:e.x1,x2:e.x1+(e.x2-e.x1)*.35,y1:r.y2,y2:e.y2};const C={x1:B.x2,x2:B.x2+(e.x2-e.x1)*.35,y1:r.y2,y2:e.y2};const s={x1:C.x2,x2:e.x2,y1:r.y2,y2:e.y2};let c=[];const t='#000000';const a9='#ffffff';const k='#00ff00';const T='#007f00';const ak='#003300';const U='videoStopped';const al='BOOT/BOOT.avi';const V=['HACK','BIKE','HIKE','VOID','VEIN','RAINING','NULL','PULLING','DATA','BAIT','HOARD','ROOTING','HEX','DEBUG','SCRIPT','LOGIC','STACK','ARRAY','OBJECT','STRINGING','BRINGING','MODULE','IMPORT','EXPORT','EVENT','REACT','PACK','BACK','HANK','HARK','HALL','LIKE','PIKE','BAKE','BITE','BIND','VINE','VILE','VOYAGE','MOID','SOIL','GAINING','PAINTED','RAVINGS','MAILING','WAILING','RAILING','ARROW','SUBJECT','EJECTS','ABJECT','REJECT','OBSESS','JANE','MARK','MARY','FREEDOM','FRENCH','FLEETING','FLOP','VAULT','ACCESS','ARMORY','TARGET','BUFFER','CIRCUIT','ENCRYPT','OVERRIDE','PROTOCOL','SUBSYS','CRYPTO','UPLOAD','BOOTSEQ','FAILSAFE','NETWORK','SECURE','DISARM','ARCHIVE','CLEARANCE','DISPOSAL','EXPUNGED','FACILITY','FORMS','PERMIT','POLICY','QUOTA','RESTRICT','TERMINAL','VAULT-TEC','APPROVED','REJECTED','SUBMIT','RECORDS','OBEY','CONFORM','GLORIOUS','SURVIVAL','PROTECT','LOYALTY','CITIZEN','ISOLATED','HOPELESS','EXILED','ORDERED','MOURNING','EXPIRED','DECEASED','ALERTED','MISTER','ROBCO','RADIO','DINER','NUKA','PIPBOY','ATOMIC','BLISSFUL','OPTIMISM','PRESET','GENERATOR','TRIAGE','HYGIENE','ELEVATOR','HYDROGEN','VAULTDOOR','BYTE','INDEX','LOGIN','CACHE','ERROR','BUNKER','REACTOR','SHELTER','CONTROL','FISSION','CANTEEN'];const h=25;const O=h*2;const o=V.slice(0,h);const p=V.slice(h,O);const W='knob1';const X='knob2';const Y='torch';const Z=100;let _=0;let $=0;let a0=!1;return H.run=function(){if(!(a&&bC))throw new Error('Pip-Boy graphics not available!');bC.clear(),P(),G(),setWatch(()=>af(),BTN_POWER,{debounce:50,edge:'rising',repeat:!0}),S?a6():(Pip.videoStart('BOOT/BOOT.avi',{x:40}),Pip.on(U,a6))},H}PortaHack().run()