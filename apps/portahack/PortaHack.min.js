function PortaHack(){function M(){a.setColor(t).fillRect(0,0,x,y)}function Z(){if(k<0||k>G)throw new Error('Invalid number of attempts remaining: '+k);a.setColor(t).fillRect(v);const b=K.padding;const d=K.textHeight;let c=k+' ATTEMPT(S) LEFT: ';for(let a=0;a<k;a++)c+='['+(a+1)+'] ';a.setColor(m).setFont(H).setFontAlign(-1,-1).drawString(c,v.x1+b,v.y1+d+b)}function w(b){if(!O)return;a.setColor(a7).drawRect(b)}function i(){const k=7;const e=b<h;const f=e?B:C;const j=e?0:h;const g=e?n[b]:o[b-j];const l=g.line;const d=f.y1+(b-j)*10;const s=f.x1+2+(k+c)*6;if(i.prevRow!==void 0&&i.prevCol!==void 0){const c=i.prevRow<h;const b=c?B:C;const e=c?0:h;const f=c?n[i.prevRow]:o[i.prevRow-e];const d=b.y1+(i.prevRow-e)*10;const g='0xF'+(2404+i.prevRow).toString(16).padStart(3,'0');a.setColor(t).fillRect(b.x1,d,b.x2,d+10),a.setColor(m).setFont('6x8').setFontAlign(-1,-1),a.drawString(g+' '+f.line,b.x1+2,d)}i.prevRow=b,i.prevCol=c;const r='0xF'+(2404+b).toString(16).padStart(3,'0');if(a.setFont('6x8').setFontAlign(-1,-1),a.setColor(m).drawString(r+' '+l,f.x1+2,d),c>=g.embedAt&&c<g.embedAt+(e?p[b].length:q[b-j].length)){const h=e?p[b]:q[b-j];const c=f.x1+2+(k+g.embedAt)*6;a.setColor(m).fillRect(c,d,c+h.length*6,d+10),a.setColor(t).drawString(l.substr(g.embedAt,h.length),c,d)}else{const b=f.x1+2+(k+c)*6;a.setColor(m).fillRect(b,d,b+6,d+10),a.setColor(t).drawString(l[c],b,d)}}function a8(){M(),D();const c='GAME OVER';a.setColor(m).setFontMonofonto18().setFontAlign(-1,-1).drawString(c,(x-a.stringWidth(c))/2,(y-l)/2);const d='Press play to restart';a.setColor(P).setFontMonofonto16().setFontAlign(-1,-1).drawString(d,(x-a.stringWidth(d))/2,(y-l)/2+30),e&&(clearInterval(e),e=null);let b=!1;e=setInterval(()=>{BTN_PLAY.read()?b||(b=!0,clearInterval(e),e=null,a2()):b=!1},100)}function a9(){a.setColor(t).fillRect(z);const b='ROBCO INDUSTRIES (TM) '+a4+' v'+a5+' PROTOCOL';a.setColor(m).setFont(H).setFontAlign(-1,-1).drawString(b.toUpperCase(),z.x1+I.padding,z.y1+I.padding)}function _(){const c=10;const d=Math.floor((s.y2-s.y1)/c);const b=f.slice(-d);a.setColor(t).fillRect(s),a.setFont('6x8').setFontAlign(-1,-1);for(let e=0;e<b.length;e++){const d=s.y2-c*(b.length-e);const f=b[e];a.setColor(m).drawString(f,s.x1+2,d)}}function $(d,b,e,f,g){const c=10;a.setFont('6x8').setFontAlign(-1,-1);for(let h=0;h<d.length;h++){const g='0xF'+(e+h).toString(16).padStart(3,'0');const d=f[h];if(!d||(typeof d.line)[1]!='t'){const a=`Invalid junk line at ${h}: ${JSON.stringify(d)}`;throw new Error(a)}const i=d.line;const j=b.y1+h*c;a.setColor(m).drawString(g+' '+i,b.x1+2,j)}}function a0(){a.setColor(t).fillRect(A);let b='';k<=0?b='!!! ACCESS DENIED !!! Select again to restart.':k===1?b='!!! WARNING: LOCKOUT IMMINENT !!!':b='ENTER PASSWORD NOW',a.setColor(m).setFont(H).setFontAlign(-1,-1).drawString(b,A.x1+J.padding,A.y1+J.padding)}function aa(){M(),D();const c='ACCESS GRANTED';a.setColor(m).setFontMonofonto18().setFontAlign(-1,-1).drawString(c,(x-a.stringWidth(c))/2,(y-l)/2);const d='Press play to restart';a.setColor(P).setFontMonofonto16().setFontAlign(-1,-1).drawString(d,(x-a.stringWidth(d))/2,(y-l)/2+30),e&&(clearInterval(e),e=null);let b=!1;e=setInterval(()=>{BTN_PLAY.read()?b||(b=!0,clearInterval(e),e=null,a2()):b=!1},100)}function a1(e,b){const c='{}[]<>?/\\|!@#$%^&*()-_=+;:"\',.`~ABCDEFGHIJKLMNOPQRSTUVWXYZ';let a='';const d=Math.random()*(e-b.length)|0;for(let f=0;f<e;f++)f===d?(a+=b,f+=b.length-1):a+=c[Math.random()*c.length|0];return{line:a,embedAt:d}}function ab(d){let a=Date.now();if(a-W<V)return;if(W=a,d===0)N();else{b=(b+(d<0?1:-1)+L)%L;const a=b<h;const f=a?0:h;const e=a?n[b]:o[b-f];const g=a?p[b]:q[b-f];c>=e.embedAt&&c<e.embedAt+g.length&&(c=e.embedAt),i()}}function ac(){let a=Date.now();if(a-X<V)return;X=a,N()}function ad(){D(),r&&clearInterval(r),bC.clear(1).flip(),E.reboot()}function ae(a){if(a===0)N();else{const f=b<h;const g=f?0:h;const d=f?n[b]:o[b-g];const j=f?p[b]:q[b-g];const k=d.line.length;const l=c>=d.embedAt&&c<d.embedAt+j.length;let e=1;l&&(a>0?e=Math.max(1,d.embedAt+j.length-c):e=Math.max(1,c-d.embedAt)),c=(c+(a>0?e:-e)+k)%k,i()}}function af(){const a=[1,5,10,15,20];const b=a.findIndex(a=>a===Pip.brightness);const c=(b+1)%a.length;Pip.brightness=a[c],Pip.updateBrightness()}function ag(){const a=BTN_PLAY.read();a&&!Y&&ac(),Y=a}function D(){Pip.removeAllListeners(S),Pip.removeAllListeners(T),Pip.removeAllListeners(U)}function a2(){e&&(clearInterval(e),e=null),r&&(clearInterval(r),r=null),c=0,b=0,k=G,j=null,f=[],n=[],o=[],u=null,i.prevRow=undefined,i.prevCol=undefined,F.run()}function N(){const d=b<h;const e=d?0:h;const a=d?n[b]:o[b-e];const g=d?p[b]:q[b-e];const l=c>=a.embedAt&&c<a.embedAt+g.length;const m=10;const i=Math.floor((s.y2-s.y1)/m);if(k<=0){a8();return}if(l){j=a.line.substr(a.embedAt,g.length);const b=f.findIndex(a=>a==='> '+j);if(b!==-1){const a=f[b+1];f.push('> '+j),a&&a.startsWith('>')&&f.push(a)}else if(j===u){f.push('> '+j),f.push('> ACCESS GRANTED'),_(),aa();return}else{let a=0;if(j.length===u.length)for(let b=0;b<j.length;b++)j[b]===u[b]&&a++;while(f.length>=i-1)f.shift();f.push('> '+j),f.push('> '+a+'/'+u.length+' correct.'),k--,Z(),a0(),k===0&&f.push('> Entry denied')}}else j=a.line[c],f.length>=i&&f.shift(),f.push('> ['+j+']');_()}function ah(){Pip.on(S,ab),Pip.on(T,ae),Pip.on(U,af)}function ai(){const a=p.length;const b=q.length;if(a===0||b===0)throw new Error('Password lists cannot be empty');if(n=p.map(a=>a1(12,a)),o=q.map(a=>a1(12,a)),n.length!==a||o.length!==b)throw new Error('Mismatch between password lists and junk lines');const c=p.concat(q);u=c[Math.random()*c.length|0],console.log('Password: ',u)}function a3(){Pip.removeAllListeners(Q),a9(),a0(),Z(),ai(),$(p,B,2404,n,!0),$(q,C,2608,o,!1),w(d),w(z),w(A),w(v),w(B),w(C),w(s),ah(),e&&clearInterval(e),r&&clearInterval(r),r=setInterval(ag,a6)}const F={};const a4='Porta Hack';const a5='1.0.0';const O=!1;const a6=16.666666666666668;const G=4;let k=G;let u=null;let c=0;let b=0;let n=[];let o=[];let j=null;let r=null;let e=null;const l=8;const H='6x'+l;const a=g;const x=g.getWidth();const y=g.getHeight();const d={x1:60,x2:x-60,y1:10,y2:y-10};const I={height:l+4,padding:2,textHeight:l};const z={x1:d.x1,x2:d.x2,y1:d.y1,y2:d.y1+I.height};const J={height:l+4,padding:2,textHeight:l};const A={x1:d.x1,x2:d.x2,y1:z.y2,y2:z.y2+J.height};const K={height:l*3+2+2,padding:2,textHeight:l};const v={x1:d.x1,x2:d.x2,y1:A.y2,y2:A.y2+K.height};const B={x1:d.x1,x2:d.x1+(d.x2-d.x1)*.35,y1:v.y2,y2:d.y2};const C={x1:B.x2,x2:B.x2+(d.x2-d.x1)*.35,y1:v.y2,y2:d.y2};const s={x1:C.x2,x2:d.x2,y1:v.y2,y2:d.y2};let f=[];const t='#000000';const a7='#ffffff';const m='#00ff00';const P='#007f00';const aj='#003300';const Q='videoStopped';const ak='BOOT/BOOT.avi';const R=['HACK','BIKE','HIKE','VOID','VEIN','RAINING','NULL','PULLING','DATA','BAIT','HOARD','ROOTING','HEX','DEBUG','SCRIPT','LOGIC','STACK','ARRAY','OBJECT','STRINGING','BRINGING','MODULE','IMPORT','EXPORT','EVENT','REACT','PACK','BACK','HANK','HARK','HALL','LIKE','PIKE','BAKE','BITE','BIND','VINE','VILE','VOYAGE','MOID','SOIL','GAINING','PAINTED','RAVINGS','MAILING','WAILING','RAILING','ARROW','SUBJECT','EJECTS','ABJECT','REJECT','OBSESS','JANE','MARK','MARY','FREEDOM','FRENCH','FLEETING','FLOP','VAULT','ACCESS','ARMORY','TARGET','BUFFER','CIRCUIT','ENCRYPT','OVERRIDE','PROTOCOL','SUBSYS','CRYPTO','UPLOAD','BOOTSEQ','FAILSAFE','NETWORK','SECURE','DISARM','ARCHIVE','CLEARANCE','DISPOSAL','EXPUNGED','FACILITY','FORMS','PERMIT','POLICY','QUOTA','RESTRICT','TERMINAL','VAULT-TEC','APPROVED','REJECTED','SUBMIT','RECORDS','OBEY','CONFORM','GLORIOUS','SURVIVAL','PROTECT','LOYALTY','CITIZEN','ISOLATED','HOPELESS','EXILED','ORDERED','MOURNING','EXPIRED','DECEASED','ALERTED','MISTER','ROBCO','RADIO','DINER','NUKA','PIPBOY','ATOMIC','BLISSFUL','OPTIMISM','PRESET','GENERATOR','TRIAGE','HYGIENE','ELEVATOR','HYDROGEN','VAULTDOOR','BYTE','INDEX','LOGIN','CACHE','ERROR','BUNKER','REACTOR','SHELTER','CONTROL','FISSION','CANTEEN'];const h=25;const L=h*2;const p=R.slice(0,h);const q=R.slice(h,L);const S='knob1';const T='knob2';const U='torch';const V=100;let W=0;let X=0;let Y=!1;return F.run=function(){if(!(a&&bC))throw new Error('Pip-Boy graphics not available!');bC.clear(),M(),D(),setWatch(()=>ad(),BTN_POWER,{debounce:50,edge:'rising',repeat:!0}),O?a3():(Pip.videoStart('BOOT/BOOT.avi',{x:40}),Pip.on(Q,a3))},F}PortaHack().run()